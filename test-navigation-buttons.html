<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Navigation Button Cross-Platform Test</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="pages/memo/memo.css" />
    <style>
      body {
        margin: 0;
        padding: 20px;
        background-color: #314559;
        color: white;
        font-family:
          system-ui,
          -apple-system,
          sans-serif;
      }

      .test-container {
        display: flex;
        flex-direction: column;
        gap: 30px;
        max-width: 1200px;
        margin: 0 auto;
      }

      .test-section {
        background: #2d2d2d;
        border-radius: 12px;
        padding: 20px;
      }

      .test-title {
        font-size: 1.3rem;
        font-weight: 600;
        margin-bottom: 20px;
        color: #ffffff;
        border-bottom: 2px solid #04e949;
        padding-bottom: 10px;
      }

      .platform-info {
        position: fixed;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.8);
        padding: 15px;
        border-radius: 8px;
        font-size: 0.9rem;
        min-width: 250px;
      }

      .info-item {
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
      }

      .info-label {
        font-weight: 600;
        color: #04e949;
      }

      .test-header {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        padding: 16px;
        gap: 12px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .test-footer {
        position: relative;
        bottom: 0;
        left: 0;
        right: 0;
        margin: 20px 0 0 0;
        padding: 16px;
        display: flex;
        gap: 12px;
        background: rgba(49, 69, 89, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 8px;
        align-items: center;
        justify-content: flex-start;
      }

      .button-states {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .state-demo {
        background: rgba(255, 255, 255, 0.05);
        padding: 15px;
        border-radius: 8px;
        text-align: center;
      }

      .state-label {
        font-size: 0.9rem;
        color: #e2e8f0;
        margin-bottom: 10px;
        font-weight: 500;
      }

      .measurements {
        margin-top: 20px;
        background: rgba(255, 255, 255, 0.05);
        padding: 15px;
        border-radius: 8px;
      }

      .measurement-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        font-size: 0.9rem;
      }

      .measurement-label {
        color: #e2e8f0;
      }

      .measurement-value {
        color: #04e949;
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <div class="platform-info">
      <div class="info-item">
        <span class="info-label">Platform:</span>
        <span id="platform-name">Loading...</span>
      </div>
      <div class="info-item">
        <span class="info-label">User Agent:</span>
        <span id="user-agent" style="font-size: 0.8rem">Loading...</span>
      </div>
      <div class="info-item">
        <span class="info-label">Padding Adjustment:</span>
        <span id="padding-adjustment">Loading...</span>
      </div>
      <div class="info-item">
        <span class="info-label">Font Weight Adj:</span>
        <span id="font-weight-adj">Loading...</span>
      </div>
    </div>

    <h1 style="text-align: center; margin-bottom: 30px">
      Navigation Button Cross-Platform Test
    </h1>

    <div class="test-container">
      <!-- Header Navigation Test -->
      <div class="test-section">
        <div class="test-title">Header Navigation Buttons</div>
        <div class="test-header">
          <a href="#" class="nav-btn" id="btn-memo-list">
            <i class="fas fa-sticky-note"></i>
            <span class="nav-text">MEMO</span>
          </a>
          <a href="#" class="nav-btn active" id="btn-clipboard">
            <i class="fas fa-clipboard"></i>
            <span class="nav-text">CLIPBOARD</span>
          </a>
          <a href="#" class="nav-btn" id="btn-prompt">
            <i class="fas fa-code"></i>
            <span class="nav-text">PROMPT</span>
          </a>
          <a href="#" class="nav-btn" id="btn-iframe">
            <i class="fas fa-globe"></i>
            <span class="nav-text">IFRAME</span>
          </a>
          <a href="#" class="nav-btn" id="btn-status">
            <i class="fas fa-chart-line"></i>
            <span class="nav-text">STATUS</span>
          </a>
          <a href="#" class="nav-btn" id="btn-setting">
            <i class="fas fa-cog"></i>
            <span class="nav-text">SETTING</span>
          </a>
        </div>

        <div class="button-states">
          <div class="state-demo">
            <div class="state-label">Normal State</div>
            <a href="#" class="nav-btn">
              <i class="fas fa-home"></i>
              <span class="nav-text">HOME</span>
            </a>
          </div>
          <div class="state-demo">
            <div class="state-label">Active State</div>
            <a href="#" class="nav-btn active">
              <i class="fas fa-star"></i>
              <span class="nav-text">ACTIVE</span>
            </a>
          </div>
          <div class="state-demo">
            <div class="state-label">Hover Test (hover me)</div>
            <a href="#" class="nav-btn" id="hover-test">
              <i class="fas fa-mouse-pointer"></i>
              <span class="nav-text">HOVER</span>
            </a>
          </div>
          <div class="state-demo">
            <div class="state-label">Long Text Test</div>
            <a href="#" class="nav-btn">
              <i class="fas fa-text-width"></i>
              <span class="nav-text">VERY LONG TEXT</span>
            </a>
          </div>
        </div>
      </div>

      <!-- Footer Navigation Test -->
      <div class="test-section">
        <div class="test-title">Footer Navigation Buttons (Memo Style)</div>
        <div class="test-footer memo-footer">
          <button class="nav-btn back-btn">
            <i class="fas fa-arrow-left"></i>
            <span class="nav-text">BACK</span>
          </button>
          <button class="nav-btn save-btn">
            <i class="fas fa-save"></i>
            <span class="nav-text">SAVE</span>
          </button>
          <button class="nav-btn delete-btn">
            <i class="fas fa-trash"></i>
            <span class="nav-text">DELETE</span>
          </button>
          <button class="nav-btn encrypt-btn">
            <i class="fas fa-lock"></i>
            <span class="nav-text">ENCRYPT</span>
          </button>
          <button class="nav-btn encrypt-btn" disabled>
            <i class="fas fa-lock"></i>
            <span class="nav-text">DISABLED</span>
          </button>
        </div>
      </div>

      <!-- Measurements Section -->
      <div class="test-section">
        <div class="test-title">Button Measurements & Platform Adjustments</div>
        <div class="measurements">
          <div class="measurement-item">
            <span class="measurement-label">Base Button Width:</span>
            <span class="measurement-value" id="base-width">-</span>
          </div>
          <div class="measurement-item">
            <span class="measurement-label">Base Button Height:</span>
            <span class="measurement-value" id="base-height">-</span>
          </div>
          <div class="measurement-item">
            <span class="measurement-label">Computed Padding:</span>
            <span class="measurement-value" id="computed-padding">-</span>
          </div>
          <div class="measurement-item">
            <span class="measurement-label">Font Size:</span>
            <span class="measurement-value" id="font-size">-</span>
          </div>
          <div class="measurement-item">
            <span class="measurement-label">Line Height:</span>
            <span class="measurement-value" id="line-height">-</span>
          </div>
          <div class="measurement-item">
            <span class="measurement-label">Box Sizing:</span>
            <span class="measurement-value" id="box-sizing">-</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <script src="pages/common.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize platform detection
        const platform = PlatformDetector.initialize();

        // Update platform info display
        document.getElementById("platform-name").textContent = platform;
        document.getElementById("user-agent").textContent =
          navigator.userAgent.substring(0, 50) + "...";

        // Get platform-specific values
        const values = PlatformDetector.getPlatformSpecificValues();
        document.getElementById("padding-adjustment").textContent =
          values.boxModelFixes.paddingAdjustment;
        document.getElementById("font-weight-adj").textContent =
          values.fontAdjustments.fontWeightAdjustment;

        // Measure button properties
        const testButton = document.querySelector(".nav-btn");
        if (testButton) {
          const computedStyle = getComputedStyle(testButton);

          document.getElementById("base-width").textContent =
            testButton.offsetWidth + "px";
          document.getElementById("base-height").textContent =
            testButton.offsetHeight + "px";
          document.getElementById("computed-padding").textContent =
            computedStyle.padding;
          document.getElementById("font-size").textContent =
            computedStyle.fontSize;
          document.getElementById("line-height").textContent =
            computedStyle.lineHeight;
          document.getElementById("box-sizing").textContent =
            computedStyle.boxSizing;
        }

        // Test CSS custom properties
        const root = document.documentElement;
        const rootStyle = getComputedStyle(root);
        console.log("Platform-specific CSS properties:", {
          "platform-padding-adjustment": rootStyle.getPropertyValue(
            "--platform-padding-adjustment"
          ),
          "platform-font-weight-adjustment": rootStyle.getPropertyValue(
            "--platform-font-weight-adjustment"
          ),
          "platform-line-height-multiplier": rootStyle.getPropertyValue(
            "--platform-line-height-multiplier"
          ),
          "platform-letter-spacing-offset": rootStyle.getPropertyValue(
            "--platform-letter-spacing-offset"
          ),
        });

        // Add hover test functionality
        const hoverTestBtn = document.getElementById("hover-test");
        let hoverCount = 0;
        hoverTestBtn.addEventListener("mouseenter", function () {
          hoverCount++;
          console.log(`Hover test #${hoverCount}: Button expanded`);
        });

        hoverTestBtn.addEventListener("mouseleave", function () {
          console.log(`Hover test #${hoverCount}: Button collapsed`);
        });

        // Test text truncation
        const longTextButtons = document.querySelectorAll(".nav-btn");
        longTextButtons.forEach((btn) => {
          const textSpan = btn.querySelector(".nav-text");
          if (textSpan) {
            btn.addEventListener("mouseenter", function () {
              const textWidth = textSpan.scrollWidth;
              const buttonWidth = btn.offsetWidth;
              console.log(
                `Button: ${textSpan.textContent}, Text width: ${textWidth}px, Button width: ${buttonWidth}px`
              );
            });
          }
        });

        // Log platform-specific adjustments
        console.log("Platform detection results:", {
          platform: platform,
          values: values,
          appliedClasses: document.body.className,
        });
      });
    </script>
  </body>
</html>
